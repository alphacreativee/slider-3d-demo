document.addEventListener("DOMContentLoaded",()=>{let x=new Lenis;requestAnimationFrame(function e(t){x.raf(t),requestAnimationFrame(e)});let f=[],i=0,H=["https://example.com/project1","https://example.com/project2","https://example.com/project3","https://example.com/project4","https://example.com/project5","https://example.com/project6","https://example.com/project7"];for(let t=1;t<=7;t++){let e=new Image;e.onload=function(){if(f.push(e),7===++i){let i=new THREE.Scene,n=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1e3),o=new THREE.WebGLRenderer({canvas:document.querySelector("canvas"),antialias:!0,powerPreference:"high-performance"}),e=(o.setSize(window.innerWidth,window.innerHeight),o.setPixelRatio(Math.min(window.devicePixelRatio,2)),o.setClearColor(0),new THREE.PlaneGeometry(20,75,200,200)),t=e.attributes.position.array;for(let e=0;e<t.length;e+=3){var T=t[e+1],T=Math.abs(T/37.5);t[e+2]=35*Math.pow(T,2)}e.computeVertexNormals();let d=108.5,s=document.createElement("canvas"),c=s.getContext("2d",{alpha:!1,willReadFrequently:!1}),w=(s.width=2048,s.height=8192,new THREE.CanvasTexture(s)),a=(w.wrapS=THREE.RepeatWrapping,w.wrapT=THREE.RepeatWrapping,w.minFilter=THREE.LinearFilter,w.magFilter=THREE.LinearFilter,w.anisotropy=Math.min(4,o.capabilities.getMaxAnisotropy()),new THREE.MeshBasicMaterial({map:w,side:THREE.DoubleSide})),r=new THREE.Mesh(e,a),h=(r.position.set(0,0,0),r.rotation.x=THREE.MathUtils.degToRad(-20),r.rotation.y=THREE.MathUtils.degToRad(20),i.add(r),17.5*Math.sin(THREE.MathUtils.degToRad(20))),l=17.5*Math.cos(THREE.MathUtils.degToRad(20)),p=(n.position.set(h,5,l),n.lookAt(0,-2,0),n.rotation.z=THREE.MathUtils.degToRad(-5),["Project 1","Project 2","Project 3","Project 4","Project 5","Project 6","Project 7"]),m=new THREE.Raycaster,E=new THREE.Vector2,g=.4286;function u(t=0){c.fillStyle="#000",c.fillRect(0,0,s.width,s.height);c.font="500 180px DM Sans",c.textAlign="center",c.textBaseline="middle";for(let e=-2;e<9;e++){var a=15.5*-e;let o=(a+=t*d)/d*s.height%s.height;o<0&&(o+=s.height);var a=(-e%7+7)%7,r=1+a,h={x:.05*s.width,y:o,width:.9*s.width,height:15/d*s.height},r=f[r-1];if(r){var l=r.width/r.height;let e,t,i,n;n=h.width/h.height<l?(t=h.height,e=t*l,i=h.x+(h.width-e)/2,h.y):(e=h.width,t=e/l,i=h.x,h.y+(h.height-t)/2),c.save(),c.beginPath(),c.roundRect(h.x,h.y,h.width,h.height),c.clip(),c.drawImage(r,i,n,e,t),c.restore(),c.save(),c.fillStyle="rgba(0, 0, 0, 0.0)",c.fillRect(h.x,o+h.height/2-60,h.width,144),c.fillStyle="#fff",c.fillText(p[a],s.width/2,o+h.height/2),c.restore()}}w.needsUpdate=!0}window.addEventListener("click",function(e){if(E.x=e.clientX/window.innerWidth*2-1,E.y=-e.clientY/window.innerHeight*2+1,m.setFromCamera(E,n),0<(e=m.intersectObject(r)).length){const t=(e[0].uv.y+g)%1;t<0&&(t+=1);e=Math.floor(7*t),e=Math.max(0,Math.min(e,6));H[e]&&window.open(H[e],"_blank")}}),window.addEventListener("mousemove",function(e){E.x=e.clientX/window.innerWidth*2-1,E.y=-e.clientY/window.innerHeight*2+1,m.setFromCamera(E,n),0<m.intersectObject(r).length?document.body.style.cursor="pointer":document.body.style.cursor="default"}),x.on("scroll",({scroll:e,limit:t})=>{u(-(g=e/t)),o.render(i,n)});let R;window.addEventListener("resize",()=>{R&&clearTimeout(R),R=setTimeout(()=>{n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix(),o.setSize(window.innerWidth,window.innerHeight)},250)}),u(-.4286),o.render(i,n)}},e.src=`./assets/images/${t}.jpg`}});